<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Star Loading – Draw after circling ✦</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100vw;
            height: 100vh;
            background: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .loader-container {
            position: relative;
            width: 200px;
            height: 200px;
            animation: fadeOut 3s ease-in-out 2s forwards;
        }

        /* Background ring – lowest layer */
        .ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 160px;
            height: 160px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            opacity: 0;
            z-index: 1;
            animation: rotateRing 3s linear infinite, fadeInRing 0.5s ease-out 0.5s forwards;
        }

        .ring::before {
            content: '';
            position: absolute;
            top: -2px;
            left: 50%;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 8px 2px rgba(255, 255, 255, 0.6);
        }

        /* Sparkles – middle layer */
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            z-index: 2;
            box-shadow: 0 0 6px 2px rgba(255, 255, 255, 0.6);
        }

        .sparkle:nth-child(2) { top: 10%; left: 50%; animation: sparkle 1.5s ease-out 0.5s infinite; }
        .sparkle:nth-child(3) { top: 30%; right: 10%; animation: sparkle 1.5s ease-out 0.8s infinite; }
        .sparkle:nth-child(4) { bottom: 20%; right: 20%; animation: sparkle 1.5s ease-out 1.1s infinite; }
        .sparkle:nth-child(5) { bottom: 20%; left: 20%; animation: sparkle 1.5s ease-out 1.4s infinite; }
        .sparkle:nth-child(6) { top: 30%; left: 10%; animation: sparkle 1.5s ease-out 1.7s infinite; }

        /* ⭐ Main Star – TOP LAYER, absolutely static (no float) */
        .star-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            z-index: 10;
            /* animation floatStar removed – star stays still */
        }

        .star-svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        /* outline – now circles twice before drawing (stroke-dasharray tricks) */
        .star-outline {
            fill: none;
            stroke: #ffffff;
            stroke-width: 3;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-dasharray: 400 400;    /* total path length ≈ 400 */
            stroke-dashoffset: 800;        /* start hidden after two full cycles (2*400) */
            animation: drawStarAfterCircles 2.2s cubic-bezier(0.45, 0, 0.2, 1) forwards;
        }

        /* fill appears after outline is fully drawn (delayed) */
        .star-fill {
            fill: #ffffff;
            opacity: 0;
            animation: fillStar 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 2.0s forwards;
            /* fill starts at 2.0s, just after outline completes its 2.2s drawing */
        }

        /* Keyframes: dashoffset goes from 800 → 0 over 2.2s.
           That means 800->400 (first full circle, no drawing), 400->0 (second circle + progressive draw).
           We also want the stroke to be visible only during the second pass.
           Actually stroke is always there, but offset moves the dash "window".
           The effect: first 400 units travel invisibly, then from 400→0 we see the stroke appear.
        */
        @keyframes drawStarAfterCircles {
            0% {
                stroke-dashoffset: 800;   /* start 2 full dashes ahead → hidden */
                opacity: 1;                /* visible but hidden by offset */
            }
            45% {
                stroke-dashoffset: 440;    /* still >400 → first cycle almost done, still invisible */
                opacity: 1;
            }
            50% {
                stroke-dashoffset: 400;    /* exactly at boundary: first full lap finished, now visible part begins */
                opacity: 1;
            }
            100% {
                stroke-dashoffset: 0;       /* fully drawn */
                opacity: 1;
            }
        }

        /* fill stays simple */
        @keyframes fillStar {
            to {
                opacity: 1;
            }
        }

        /* sparkle + ring unchanged */
        @keyframes sparkle {
            0% {
                opacity: 0;
                transform: scale(0) rotate(0deg);
            }
            50% {
                opacity: 1;
                transform: scale(1) rotate(180deg);
            }
            100% {
                opacity: 0;
                transform: scale(0) rotate(360deg);
            }
        }

        @keyframes rotateRing {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        @keyframes fadeInRing {
            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            30% {
                opacity: 0.8;
                transform: scale(1.05);
            }
            100% {
                opacity: 0;
                transform: scale(0.8);
            }
        }

        /* (floatStar keyframe removed) */
    </style>
</head>
<body>
    <div class="loader-container">
        <!-- Background ring & sparkles (same) -->
        <div class="ring"></div>
        <div class="sparkle"></div>
        <div class="sparkle"></div>
        <div class="sparkle"></div>
        <div class="sparkle"></div>
        <div class="sparkle"></div>
        
        <!-- Main Star - static, with outline that runs two circles then draws -->
        <div class="star-wrapper">
            <svg class="star-svg" viewBox="0 0 100 100">
                <!-- Fill layer (appears after draw) -->
                <polygon class="star-fill" points="50,5 61,35 95,35 68,57 79,91 50,70 21,91 32,57 5,35 39,35"/>
                <!-- Outline layer – will circle twice before final reveal -->
                <polygon class="star-outline" points="50,5 61,35 95,35 68,57 79,91 50,70 21,91 32,57 5,35 39,35"/>
            </svg>
        </div>
    </div>
</body>
</html>
